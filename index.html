<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TB Component Viewer</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji";
      background: #0a0a0a;
      color: #fff;
      height: 100vh;
      overflow: hidden;
    }

    /* 메인 레이아웃 */
    .app {
      height: 100vh;
      display: flex;
      flex-direction: column;
    }

    /* 상단 툴바 */
    .toolbar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px 24px;
      background: #111;
      border-bottom: 1px solid #222;
      z-index: 10;
    }

    .toolbar-left {
      display: flex;
      align-items: center;
      gap: 16px;
    }

    .logo {
      font-size: 18px;
      font-weight: 600;
      color: #fff;
      text-decoration: none;
      transition: opacity 0.2s;
    }

    .logo:hover {
      opacity: 0.8;
    }

    /* 추천사이트 버튼 */
    .recommend-btn {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 8px 16px;
      background: linear-gradient(135deg, #6366f1, #8b5cf6);
      color: #fff;
      text-decoration: none;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 500;
      transition: all 0.2s ease;
    }

    .recommend-btn:hover {
      background: linear-gradient(135deg, #4f46e5, #7c3aed);
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(99, 102, 241, 0.4);
    }

    .recommend-btn svg {
      flex-shrink: 0;
    }

    /* 코드 입력 버튼 (분석 버튼과 동일 크기) */
    .input-btn {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 8px 16px;
      background: #262626;
      color: #e5e5e5;
      border: 1px solid #404040;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .input-btn:hover {
      background: #333;
      border-color: #525252;
      color: #fff;
    }

    .input-btn svg {
      flex-shrink: 0;
    }

    .toolbar-right {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    /* 분석 버튼 (violet 스타일) */
    .analyze-btn {
      position: relative;
      z-index: 0;
      display: flex;
      align-items: center;
      gap: 8px;
      overflow: hidden;
      border-radius: 8px;
      border: 1px solid #c4b5fd;
      padding: 8px 16px;
      font-size: 14px;
      font-weight: 600;
      text-transform: uppercase;
      color: #c4b5fd;
      background: transparent;
      cursor: pointer;
      transition: all 0.5s;
    }

    .analyze-btn::before {
      content: "";
      position: absolute;
      bottom: 0;
      right: 0;
      width: 250%;
      height: 250%;
      z-index: -1;
      transform: translate(100%, 100%);
      border-radius: 50%;
      background: #c4b5fd;
      transition: transform 0.7s ease;
    }

    .analyze-btn:hover {
      transform: scale(1.05);
      color: #171717;
    }

    .analyze-btn:hover::before {
      transform: translate(20%, 20%);
    }

    .analyze-btn:active {
      transform: scale(0.95);
    }

    .analyze-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .analyze-btn:disabled:hover {
      transform: none;
      color: #c4b5fd;
    }

    .analyze-btn:disabled::before {
      transform: translate(100%, 100%);
    }

    /* 결과 보기 버튼 (블루 그라데이션 스타일) */
    .result-btn {
      border-radius: 6px;
      background: linear-gradient(to bottom right, #60a5fa, #1d4ed8);
      padding: 8px 16px;
      font-size: 14px;
      font-weight: 600;
      color: #fafafa;
      border: none;
      box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.5), 0 0 0 4px #09090b;
      cursor: pointer;
      transition: all 0.2s;
    }

    .result-btn:hover {
      transform: scale(1.02);
      box-shadow: 0 0 0 2px transparent, 0 0 0 4px #09090b;
    }

    .result-btn:active {
      transform: scale(0.98);
      box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.7), 0 0 0 4px #09090b;
    }

    /* 메인 콘텐츠 영역 */
    .main-content {
      flex: 1;
      position: relative;
      overflow: hidden;
    }

    /* 미리보기 전체 화면 */
    .preview-fullscreen {
      width: 100%;
      height: 100%;
      background: #fff;
    }

    .preview-iframe {
      width: 100%;
      height: 100%;
      border: none;
    }

    .empty-preview {
      position: relative;
      height: 100%;
      overflow: hidden;
      background: #0a0a0a;
    }

    .grid-container {
      display: grid;
      width: 100%;
      height: 100%;
      grid-template-columns: repeat(auto-fit, minmax(75px, 1fr));
      grid-template-rows: repeat(auto-fit, minmax(75px, 1fr));
    }

    .grid-square {
      height: 100%;
      width: 100%;
      border: 1px solid #171717;
      transition: background 0.3s ease;
    }

    .empty-preview-content {
      position: absolute;
      inset: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 32px;
      pointer-events: none;
    }

    .empty-preview-content h1 {
      font-size: clamp(2rem, 8vw, 6rem);
      font-weight: 900;
      text-transform: uppercase;
      color: #fff;
      text-align: center;
      line-height: 1;
      margin-bottom: 16px;
    }

    .empty-preview-content p {
      font-size: 16px;
      color: #737373;
      text-align: center;
      max-width: 500px;
      margin-bottom: 24px;
      font-weight: 300;
    }

    .empty-preview-content .grid-btn {
      pointer-events: auto;
      background: #818cf8;
      padding: 10px 20px;
      font-size: 16px;
      font-weight: 700;
      text-transform: uppercase;
      color: #0a0a0a;
      border: none;
      cursor: pointer;
      mix-blend-mode: difference;
      transition: transform 0.2s;
    }

    .empty-preview-content .grid-btn:hover {
      transform: scale(1.05);
    }

    .empty-preview-content .grid-btn:active {
      transform: scale(0.98);
    }

    /* 분석 패널 (슬라이드) */
    .analysis-panel {
      position: absolute;
      top: 0;
      right: 0;
      width: 450px;
      height: 100%;
      background: #111;
      border-left: 1px solid #333;
      transform: translateX(100%);
      transition: transform 0.3s ease;
      display: flex;
      flex-direction: column;
      z-index: 20;
    }

    .analysis-panel.open {
      transform: translateX(0);
    }

    .panel-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 16px 20px;
      background: #1a1a1a;
      border-bottom: 1px solid #333;
    }

    .panel-tabs {
      display: flex;
      gap: 4px;
    }

    .panel-tab {
      padding: 8px 16px;
      background: transparent;
      border: none;
      border-radius: 8px;
      color: #888;
      font-size: 14px;
      cursor: pointer;
      transition: 0.2s;
    }

    .panel-tab:hover {
      color: #fff;
      background: #333;
    }

    .panel-tab.active {
      color: #fff;
      background: #3b82f6;
    }

    .close-panel {
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #333;
      border: none;
      border-radius: 8px;
      color: #fff;
      cursor: pointer;
      transition: 0.2s;
    }

    .close-panel:hover {
      background: #444;
    }

    .panel-content {
      flex: 1;
      overflow: auto;
      padding: 20px;
    }

    .panel-content[data-tab]:not(.active) {
      display: none;
    }

    .panel-content.active {
      display: block;
    }

    /* 모달 */
    .modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.8);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 100;
      opacity: 0;
      visibility: hidden;
      transition: 0.3s;
    }

    .modal-overlay.open {
      opacity: 1;
      visibility: visible;
    }

    .modal {
      width: 90%;
      max-width: 800px;
      max-height: 80vh;
      background: #1a1a1a;
      border-radius: 16px;
      overflow: hidden;
      transform: scale(0.9);
      transition: 0.3s;
    }

    .modal-overlay.open .modal {
      transform: scale(1);
    }

    .modal-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 20px 24px;
      background: #222;
      border-bottom: 1px solid #333;
    }

    .modal-title {
      font-size: 18px;
      font-weight: 600;
    }

    .modal-close {
      width: 36px;
      height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #333;
      border: none;
      border-radius: 8px;
      color: #fff;
      cursor: pointer;
      transition: 0.2s;
    }

    .modal-close:hover {
      background: #444;
    }

    .modal-body {
      padding: 24px;
    }

    .code-textarea {
      width: 100%;
      height: 300px;
      padding: 16px;
      background: #111;
      border: 1px solid #333;
      border-radius: 12px;
      color: #e5e5e5;
      font-family: 'Monaco', 'Menlo', monospace;
      font-size: 14px;
      line-height: 1.6;
      resize: none;
      outline: none;
    }

    .code-textarea:focus {
      border-color: #3b82f6;
    }

    .code-textarea::placeholder {
      color: #555;
    }

    .modal-footer {
      display: flex;
      justify-content: flex-end;
      gap: 12px;
      padding: 16px 24px;
      background: #222;
      border-top: 1px solid #333;
    }

    .btn-secondary {
      padding: 10px 20px;
      background: #333;
      border: none;
      border-radius: 8px;
      color: #fff;
      font-size: 14px;
      cursor: pointer;
      transition: 0.2s;
    }

    .btn-secondary:hover {
      background: #444;
    }

    .btn-primary {
      padding: 10px 24px;
      background: #3b82f6;
      border: none;
      border-radius: 8px;
      color: #fff;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: 0.2s;
    }

    .btn-primary:hover {
      background: #2563eb;
    }

    /* 분석 결과 스타일 */
    .section {
      margin-bottom: 24px;
    }

    .section-title {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 13px;
      font-weight: 600;
      color: #888;
      text-transform: uppercase;
      margin-bottom: 12px;
      padding-bottom: 8px;
      border-bottom: 1px solid #333;
    }

    .css-code {
      background: #0a0a0a;
      padding: 16px;
      border-radius: 10px;
      overflow-x: auto;
      font-family: 'Monaco', monospace;
      font-size: 12px;
      line-height: 1.6;
      color: #e5e5e5;
      max-height: 400px;
      overflow-y: auto;
    }

    .prop-list {
      list-style: none;
    }

    .prop-item {
      display: flex;
      justify-content: space-between;
      padding: 8px 0;
      border-bottom: 1px solid #222;
      font-family: 'Monaco', monospace;
      font-size: 12px;
    }

    .prop-name {
      color: #93c5fd;
    }

    .prop-value {
      color: #fde68a;
      text-align: right;
      max-width: 55%;
      word-break: break-all;
    }

    .color-preview {
      display: inline-block;
      width: 14px;
      height: 14px;
      border-radius: 3px;
      vertical-align: middle;
      margin-right: 6px;
      border: 1px solid #444;
    }

    .transition-item {
      background: #1a1a1a;
      border-radius: 10px;
      padding: 14px;
      margin-bottom: 10px;
    }

    .transition-prop {
      color: #a78bfa;
      font-weight: 500;
      font-size: 14px;
    }

    .transition-details {
      color: #888;
      font-size: 12px;
      margin-top: 6px;
      font-family: 'Monaco', monospace;
    }

    .badge {
      display: inline-block;
      padding: 3px 10px;
      border-radius: 6px;
      font-size: 11px;
      font-weight: 500;
    }

    .badge-blue {
      background: #1e3a5f;
      color: #60a5fa;
    }

    .badge-green {
      background: #14532d;
      color: #4ade80;
    }

    .badge-purple {
      background: #3b0764;
      color: #c084fc;
    }

    /* 서브 탭 스타일 */
    .sub-tabs {
      display: flex;
      gap: 4px;
      margin-bottom: 16px;
      padding-bottom: 12px;
      border-bottom: 1px solid #333;
    }

    .sub-tab {
      padding: 6px 14px;
      background: transparent;
      border: none;
      border-radius: 6px;
      color: #888;
      font-size: 13px;
      cursor: pointer;
      transition: 0.2s;
    }

    .sub-tab:hover {
      color: #fff;
      background: #333;
    }

    .sub-tab.active {
      color: #fff;
      background: #444;
    }

    .sub-content {
      display: none;
    }

    .sub-content.active {
      display: block;
    }

    .copy-btn {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 8px 14px;
      background: #333;
      border: none;
      border-radius: 8px;
      color: #fff;
      font-size: 13px;
      cursor: pointer;
      transition: 0.2s;
    }

    .copy-btn:hover {
      background: #444;
    }

    .copy-btn.copied {
      background: #22c55e;
    }

    .empty-state {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 200px;
      color: #555;
      text-align: center;
    }

    .hidden {
      display: none !important;
    }

    /* JS 필요 알림 */
    .js-notice {
      background: #422006;
      border: 1px solid #92400e;
      border-radius: 10px;
      padding: 14px;
      margin-bottom: 16px;
    }

    .js-notice-title {
      display: flex;
      align-items: center;
      gap: 8px;
      color: #fbbf24;
      font-weight: 600;
      font-size: 14px;
      margin-bottom: 6px;
    }

    .js-notice-desc {
      color: #fcd34d;
      font-size: 12px;
      line-height: 1.5;
    }

    /* 모바일 반응형 */
    @media (max-width: 768px) {
      .toolbar {
        flex-direction: column;
        gap: 12px;
        padding: 12px 16px;
      }

      .toolbar-left {
        width: 100%;
        justify-content: center;
      }

      .toolbar-right {
        width: 100%;
        flex-wrap: wrap;
        justify-content: center;
        gap: 8px;
      }

      .bg-options {
        order: 1;
      }

      .option-toggle {
        order: 2;
      }

      .input-btn {
        font-size: 13px;
        padding: 6px 12px;
      }

      .analyze-btn {
        order: 4;
        font-size: 14px;
        height: 36px;
        padding: 0 16px;
      }

      .analysis-panel {
        width: 100%;
        height: 70%;
        top: auto;
        bottom: 0;
        transform: translateY(100%);
        border-left: none;
        border-top: 1px solid #333;
        border-radius: 16px 16px 0 0;
      }

      .analysis-panel.open {
        transform: translateY(0);
      }

      .panel-header {
        padding: 12px 16px;
      }

      .panel-tabs {
        gap: 2px;
      }

      .panel-tab {
        padding: 6px 10px;
        font-size: 12px;
      }

      .modal {
        width: 95%;
        max-height: 90vh;
        border-radius: 12px;
      }

      .modal-header {
        padding: 16px;
      }

      .modal-title {
        font-size: 16px;
      }

      .modal-body {
        padding: 16px;
      }

      .code-textarea {
        height: 250px;
        font-size: 13px;
      }

      .modal-footer {
        padding: 12px 16px;
      }

      .empty-preview p {
        font-size: 14px;
        padding: 0 20px;
      }

      .css-code {
        font-size: 11px;
        padding: 12px;
      }

      .prop-item {
        font-size: 11px;
        flex-direction: column;
        gap: 4px;
      }

      .prop-value {
        max-width: 100%;
        text-align: left;
      }
    }

    @media (max-width: 480px) {
      .logo {
        font-size: 16px;
      }

      .input-btn span {
        display: none;
      }

      .recommend-btn span {
        display: none;
      }

      .analyze-btn {
        padding: 6px 12px;
        font-size: 12px;
      }

      .result-btn {
        padding: 6px 12px;
        font-size: 12px;
      }
    }
  </style>
</head>

<body>
  <div class="app">
    <!-- 상단 툴바 -->
    <div class="toolbar">
      <div class="toolbar-left">
        <a href="index.html" class="logo">TB Component Viewer</a>
      </div>

      <div class="toolbar-right">
        <!-- 코드 입력 버튼 -->
        <button class="input-btn" id="openModalBtn">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="16 18 22 12 16 6"></polyline>
            <polyline points="8 6 2 12 8 18"></polyline>
          </svg>
          <span>코드 입력</span>
        </button>

        <!-- 분석 버튼 -->
        <button class="analyze-btn" id="analyzeBtn">
          <span>분석하기</span>
        </button>

        <!-- 결과 보기 버튼 (분석 후 표시) -->
        <button class="result-btn hidden" id="viewResultBtn">결과 보기</button>

        <!-- 추천사이트 버튼 -->
        <a href="https://www.hover.dev/" target="_blank" class="recommend-btn">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
            <polyline points="15 3 21 3 21 9"></polyline>
            <line x1="10" y1="14" x2="21" y2="3"></line>
          </svg>
          <span>추천사이트</span>
        </a>
      </div>
    </div>

    <!-- 메인 콘텐츠 -->
    <div class="main-content">
      <!-- 전체 화면 미리보기 -->
      <div class="preview-fullscreen" id="previewContainer">
        <div class="empty-preview" id="emptyPreview">
          <div class="grid-container" id="gridContainer"></div>
          <div class="empty-preview-content">
            <h1>Paste Your Code</h1>
            <p>HTML 컴포넌트 코드를 붙여넣으면 미리보기와 함께 React, HTML 코드를 추출할 수 있습니다</p>
            <button class="grid-btn" id="emptyAddBtn">코드 입력하기</button>
          </div>
        </div>
        <iframe class="preview-iframe hidden" id="previewFrame"></iframe>
      </div>

      <!-- 분석 패널 (슬라이드) -->
      <div class="analysis-panel" id="analysisPanel">
        <div class="panel-header">
          <div class="panel-tabs">
            <button class="panel-tab active" data-tab="html-full">HTML</button>
            <button class="panel-tab" data-tab="react-full">React</button>
          </div>
          <button class="close-panel" id="closePanel">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="18" y1="6" x2="6" y2="18"></line>
              <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
          </button>
        </div>

        <!-- HTML 탭 (서브탭: HTML, CSS, JS) -->
        <div class="panel-content active" id="htmlFullContent" data-tab="html-full">
          <div class="sub-tabs" id="htmlSubTabs">
            <button class="sub-tab active" data-subtab="html">HTML</button>
            <button class="sub-tab" data-subtab="css">CSS</button>
            <button class="sub-tab" data-subtab="js">JS</button>
            <button class="sub-tab" data-subtab="full">전체</button>
          </div>
          <div class="sub-content active" id="htmlOnlyContent" data-subcontent="html">
            <div class="empty-state">
              <p>분석하기 버튼을 클릭하면<br>HTML 코드가 표시됩니다</p>
            </div>
          </div>
          <div class="sub-content" id="cssOnlyContent" data-subcontent="css">
            <div class="empty-state">
              <p>분석하기 버튼을 클릭하면<br>CSS 코드가 표시됩니다</p>
            </div>
          </div>
          <div class="sub-content" id="jsOnlyContent" data-subcontent="js">
            <div class="empty-state">
              <p>분석하기 버튼을 클릭하면<br>JS 코드가 표시됩니다</p>
            </div>
          </div>
          <div class="sub-content" id="fullHtmlContent" data-subcontent="full">
            <div class="empty-state">
              <p>분석하기 버튼을 클릭하면<br>전체 코드가 표시됩니다</p>
            </div>
          </div>
        </div>

        <!-- React 전체 코드 탭 -->
        <div class="panel-content" id="reactFullContent" data-tab="react-full">
          <div class="empty-state">
            <p>분석하기 버튼을 클릭하면<br>React 코드가 표시됩니다</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- 코드 입력 모달 -->
  <div class="modal-overlay" id="modalOverlay">
    <div class="modal">
      <div class="modal-header">
        <span class="modal-title">HTML 코드 입력</span>
        <button class="modal-close" id="modalClose">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <textarea class="code-textarea" id="codeInput" placeholder="HTML 코드를 여기에 붙여넣으세요...

예시:
<button class='px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600'>
  Click me
</button>"></textarea>
      </div>
      <div class="modal-footer">
        <button class="btn-secondary" id="clearCode">초기화</button>
        <button class="btn-primary" id="applyCode">적용하기</button>
      </div>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
  <script>
    // Elements
    const openModalBtn = document.getElementById('openModalBtn');
    const emptyAddBtn = document.getElementById('emptyAddBtn');
    const modalOverlay = document.getElementById('modalOverlay');
    const modalClose = document.getElementById('modalClose');
    const codeInput = document.getElementById('codeInput');
    const clearCode = document.getElementById('clearCode');
    const applyCode = document.getElementById('applyCode');
    const previewFrame = document.getElementById('previewFrame');
    const emptyPreview = document.getElementById('emptyPreview');
    const analyzeBtn = document.getElementById('analyzeBtn');
    const analysisPanel = document.getElementById('analysisPanel');
    const closePanel = document.getElementById('closePanel');
    const panelTabs = document.querySelectorAll('.panel-tab');
    const viewResultBtn = document.getElementById('viewResultBtn');

    let currentCode = '';
    let extractedHtmlFull = '';
    let extractedReactFull = '';
    let extractedHtmlOnly = '';
    let extractedCssOnly = '';
    let extractedJsOnly = '';
    let hasAnalyzed = false;

    // 그리드 생성 및 호버 효과
    const gridContainer = document.getElementById('gridContainer');
    const GRID_COLOR = '#818cf8';

    function createGrid() {
      const container = gridContainer;
      if (!container) return;

      // 화면 크기에 따라 그리드 수 계산
      const squareSize = 75;
      const cols = Math.ceil(container.offsetWidth / squareSize);
      const rows = Math.ceil(container.offsetHeight / squareSize);
      const totalSquares = cols * rows;

      container.innerHTML = '';

      for (let i = 0; i < totalSquares; i++) {
        const square = document.createElement('div');
        square.className = 'grid-square';
        square.id = `square-${i}`;

        square.addEventListener('mouseenter', () => {
          square.style.background = GRID_COLOR;
        });

        square.addEventListener('mouseleave', () => {
          square.style.background = 'transparent';
        });

        container.appendChild(square);
      }
    }

    // 초기 그리드 생성
    createGrid();

    // 창 크기 변경 시 그리드 재생성
    let resizeTimeout;
    window.addEventListener('resize', () => {
      clearTimeout(resizeTimeout);
      resizeTimeout = setTimeout(createGrid, 200);
    });

    // 모달 열기/닫기
    function openModal() {
      modalOverlay.classList.add('open');
      codeInput.focus();
    }

    function closeModal() {
      modalOverlay.classList.remove('open');
    }

    openModalBtn.addEventListener('click', openModal);
    emptyAddBtn.addEventListener('click', openModal);
    modalClose.addEventListener('click', closeModal);
    modalOverlay.addEventListener('click', (e) => {
      if (e.target === modalOverlay) closeModal();
    });

    // 코드 적용
    applyCode.addEventListener('click', () => {
      const newCode = codeInput.value.trim();
      if (newCode !== currentCode) {
        currentCode = newCode;
        hasAnalyzed = false;
        viewResultBtn.classList.add('hidden');
        analysisPanel.classList.remove('open');
      }
      updatePreview();
      closeModal();
    });

    clearCode.addEventListener('click', () => {
      codeInput.value = '';
    });

    // 코드 타입 감지 (React vs HTML)
    function detectCodeType(code) {
      const reactPatterns = [
        /import\s+.*from\s+["']react["']/,
        /import\s+.*from\s+["']framer-motion["']/,
        /import\s+{.*}\s+from\s+["']/,
        /export\s+(const|default|function)/,
        /useState|useEffect|useRef/,
        /<motion\./,
        /className=/,
        /=>\s*{/,
        /=>\s*\(/
      ];

      return reactPatterns.some(pattern => pattern.test(code)) ? 'react' : 'html';
    }

    // React Icons를 SVG로 변환하는 맵
    const REACT_ICONS_MAP = {
      // Feather Icons (Fi)
      'FiArrowRight': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg>',
      'FiArrowLeft': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>',
      'FiBarChart': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><line x1="12" y1="20" x2="12" y2="10"></line><line x1="18" y1="20" x2="18" y2="4"></line><line x1="6" y1="20" x2="6" y2="16"></line></svg>',
      'FiBarChart2': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><line x1="18" y1="20" x2="18" y2="10"></line><line x1="12" y1="20" x2="12" y2="4"></line><line x1="6" y1="20" x2="6" y2="14"></line></svg>',
      'FiChevronDown': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><polyline points="6 9 12 15 18 9"></polyline></svg>',
      'FiChevronUp': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><polyline points="18 15 12 9 6 15"></polyline></svg>',
      'FiChevronLeft': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><polyline points="15 18 9 12 15 6"></polyline></svg>',
      'FiChevronRight': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><polyline points="9 18 15 12 9 6"></polyline></svg>',
      'FiHome': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>',
      'FiPieChart': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><path d="M21.21 15.89A10 10 0 1 1 8 2.83"></path><path d="M22 12A10 10 0 0 0 12 2v10z"></path></svg>',
      'FiMenu': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>',
      'FiX': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',
      'FiPlus': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>',
      'FiMinus': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><line x1="5" y1="12" x2="19" y2="12"></line></svg>',
      'FiCheck': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><polyline points="20 6 9 17 4 12"></polyline></svg>',
      'FiSearch': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>',
      'FiUser': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>',
      'FiUsers': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>',
      'FiSettings': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>',
      'FiMail': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg>',
      'FiHeart': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>',
      'FiStar': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>',
      'FiEdit': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg>',
      'FiTrash': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>',
      'FiTrash2': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg>',
      'FiCopy': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>',
      'FiDownload': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>',
      'FiUpload': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line></svg>',
      'FiExternalLink': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>',
      'FiLink': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>',
      'FiCalendar': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>',
      'FiClock': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>',
      'FiFolder': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path></svg>',
      'FiFile': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline></svg>',
      'FiImage': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline></svg>',
      'FiCamera': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path><circle cx="12" cy="13" r="4"></circle></svg>',
      'FiPhone': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path></svg>',
      'FiMessageCircle': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path></svg>',
      'FiBell': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path><path d="M13.73 21a2 2 0 0 1-3.46 0"></path></svg>',
      'FiShoppingCart': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><circle cx="9" cy="21" r="1"></circle><circle cx="20" cy="21" r="1"></circle><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path></svg>',
      'FiShoppingBag': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"></path><line x1="3" y1="6" x2="21" y2="6"></line><path d="M16 10a4 4 0 0 1-8 0"></path></svg>',
      'FiGlobe': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><circle cx="12" cy="12" r="10"></circle><line x1="2" y1="12" x2="22" y2="12"></line><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path></svg>',
      'FiMap': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><polygon points="1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"></polygon><line x1="8" y1="2" x2="8" y2="18"></line><line x1="16" y1="6" x2="16" y2="22"></line></svg>',
      'FiMapPin': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle></svg>',
      'FiLock': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg>',
      'FiUnlock': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 9.9-1"></path></svg>',
      'FiEye': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>',
      'FiEyeOff': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path><line x1="1" y1="1" x2="23" y2="23"></line></svg>',
      'FiInfo': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg>',
      'FiAlertCircle': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>',
      'FiAlertTriangle': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>',
      'FiLogIn': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"></path><polyline points="10 17 15 12 10 7"></polyline><line x1="15" y1="12" x2="3" y2="12"></line></svg>',
      'FiLogOut': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line></svg>',
      'FiRefreshCw': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path></svg>',
      'FiZap': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon></svg>',
      'FiSend': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg>',
      'FiShare': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"></path><polyline points="16 6 12 2 8 6"></polyline><line x1="12" y1="2" x2="12" y2="15"></line></svg>',
      'FiShare2': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><circle cx="18" cy="5" r="3"></circle><circle cx="6" cy="12" r="3"></circle><circle cx="18" cy="19" r="3"></circle><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line></svg>',
      'FiFilter': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon></svg>',
      'FiGrid': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><rect x="3" y="3" width="7" height="7"></rect><rect x="14" y="3" width="7" height="7"></rect><rect x="14" y="14" width="7" height="7"></rect><rect x="3" y="14" width="7" height="7"></rect></svg>',
      'FiList': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg>',
      'FiMoreHorizontal': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><circle cx="12" cy="12" r="1"></circle><circle cx="19" cy="12" r="1"></circle><circle cx="5" cy="12" r="1"></circle></svg>',
      'FiMoreVertical': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><circle cx="12" cy="12" r="1"></circle><circle cx="12" cy="5" r="1"></circle><circle cx="12" cy="19" r="1"></circle></svg>',
      'FiSliders': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><line x1="4" y1="21" x2="4" y2="14"></line><line x1="4" y1="10" x2="4" y2="3"></line><line x1="12" y1="21" x2="12" y2="12"></line><line x1="12" y1="8" x2="12" y2="3"></line><line x1="20" y1="21" x2="20" y2="16"></line><line x1="20" y1="12" x2="20" y2="3"></line><line x1="1" y1="14" x2="7" y2="14"></line><line x1="9" y1="8" x2="15" y2="8"></line><line x1="17" y1="16" x2="23" y2="16"></line></svg>',
      'FiTrendingUp': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline><polyline points="17 6 23 6 23 12"></polyline></svg>',
      'FiTrendingDown': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><polyline points="23 18 13.5 8.5 8.5 13.5 1 6"></polyline><polyline points="17 18 23 18 23 12"></polyline></svg>',
      'FiDollarSign': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><line x1="12" y1="1" x2="12" y2="23"></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path></svg>',
      'FiCreditCard': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect><line x1="1" y1="10" x2="23" y2="10"></line></svg>',
      'FiLayers': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><polygon points="12 2 2 7 12 12 22 7 12 2"></polygon><polyline points="2 17 12 22 22 17"></polyline><polyline points="2 12 12 17 22 12"></polyline></svg>',
      'FiBox': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line></svg>',
      'FiPackage': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><line x1="16.5" y1="9.4" x2="7.5" y2="4.21"></line><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line></svg>',
      'FiActivity': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline></svg>',
      'FiAward': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><circle cx="12" cy="8" r="7"></circle><polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"></polyline></svg>',
      'FiGift': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><polyline points="20 12 20 22 4 22 4 12"></polyline><rect x="2" y="7" width="20" height="5"></rect><line x1="12" y1="22" x2="12" y2="7"></line><path d="M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"></path><path d="M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"></path></svg>',
      'FiBookmark': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path></svg>',
      'FiFlag': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><path d="M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"></path><line x1="4" y1="22" x2="4" y2="15"></line></svg>',
      'FiTag': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg>',
      'FiTarget': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><circle cx="12" cy="12" r="10"></circle><circle cx="12" cy="12" r="6"></circle><circle cx="12" cy="12" r="2"></circle></svg>',
      'FiSun': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>',
      'FiMoon': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>',
      'FiCloud': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><path d="M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"></path></svg>',
      'FiCode': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline></svg>',
      'FiTerminal': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><polyline points="4 17 10 11 4 5"></polyline><line x1="12" y1="19" x2="20" y2="19"></line></svg>',
      'FiGithub': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg>',
      'FiTwitter': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path></svg>',
      'FiLinkedin': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle></svg>',
      'FiFacebook': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path></svg>',
      'FiInstagram': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path><line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line></svg>',
      'FiYoutube': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><path d="M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z"></path><polygon points="9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02"></polygon></svg>',
      'FiPlay': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>',
      'FiPause': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><rect x="6" y="4" width="4" height="16"></rect><rect x="14" y="4" width="4" height="16"></rect></svg>',
      'FiVolume': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon></svg>',
      'FiVolume1': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path></svg>',
      'FiVolume2': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path></svg>',
      'FiVolumeX': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><line x1="23" y1="9" x2="17" y2="15"></line><line x1="17" y1="9" x2="23" y2="15"></line></svg>',
      'FiMaximize': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"></path></svg>',
      'FiMinimize': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><path d="M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"></path></svg>',
      'FiMaximize2': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><polyline points="15 3 21 3 21 9"></polyline><polyline points="9 21 3 21 3 15"></polyline><line x1="21" y1="3" x2="14" y2="10"></line><line x1="3" y1="21" x2="10" y2="14"></line></svg>',
      'FiMinimize2': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><polyline points="4 14 10 14 10 20"></polyline><polyline points="20 10 14 10 14 4"></polyline><line x1="14" y1="10" x2="21" y2="3"></line><line x1="3" y1="21" x2="10" y2="14"></line></svg>',
      'FiRotateCw': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><polyline points="23 4 23 10 17 10"></polyline><path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"></path></svg>',
      'FiRotateCcw': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><polyline points="1 4 1 10 7 10"></polyline><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"></path></svg>',
      'FiSave': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path><polyline points="17 21 17 13 7 13 7 21"></polyline><polyline points="7 3 7 8 15 8"></polyline></svg>',
      'FiPrinter': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><polyline points="6 9 6 2 18 2 18 9"></polyline><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"></path><rect x="6" y="14" width="12" height="8"></rect></svg>',
      'FiPaperclip': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"></path></svg>',
      'FiMic': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"></path><path d="M19 10v2a7 7 0 0 1-14 0v-2"></path><line x1="12" y1="19" x2="12" y2="23"></line><line x1="8" y1="23" x2="16" y2="23"></line></svg>',
      'FiMicOff': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><line x1="1" y1="1" x2="23" y2="23"></line><path d="M9 9v3a3 3 0 0 0 5.12 2.12M15 9.34V4a3 3 0 0 0-5.94-.6"></path><path d="M17 16.95A7 7 0 0 1 5 12v-2m14 0v2a7 7 0 0 1-.11 1.23"></path><line x1="12" y1="19" x2="12" y2="23"></line><line x1="8" y1="23" x2="16" y2="23"></line></svg>',
      'FiVideo': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><polygon points="23 7 16 12 23 17 23 7"></polygon><rect x="1" y="5" width="15" height="14" rx="2" ry="2"></rect></svg>',
      'FiVideoOff': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><path d="M16 16v1a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h2m5.66 0H14a2 2 0 0 1 2 2v3.34l1 1L23 7v10"></path><line x1="1" y1="1" x2="23" y2="23"></line></svg>',
      'FiWifi': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><path d="M5 12.55a11 11 0 0 1 14.08 0"></path><path d="M1.42 9a16 16 0 0 1 21.16 0"></path><path d="M8.53 16.11a6 6 0 0 1 6.95 0"></path><line x1="12" y1="20" x2="12.01" y2="20"></line></svg>',
      'FiWifiOff': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><line x1="1" y1="1" x2="23" y2="23"></line><path d="M16.72 11.06A10.94 10.94 0 0 1 19 12.55"></path><path d="M5 12.55a10.94 10.94 0 0 1 5.17-2.39"></path><path d="M10.71 5.05A16 16 0 0 1 22.58 9"></path><path d="M1.42 9a15.91 15.91 0 0 1 4.7-2.88"></path><path d="M8.53 16.11a6 6 0 0 1 6.95 0"></path><line x1="12" y1="20" x2="12.01" y2="20"></line></svg>',
      'FiBluetooth': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><polyline points="6.5 6.5 17.5 17.5 12 23 12 1 17.5 6.5 6.5 17.5"></polyline></svg>',
      'FiCast': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><path d="M2 16.1A5 5 0 0 1 5.9 20M2 12.05A9 9 0 0 1 9.95 20M2 8V6a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-6"></path><line x1="2" y1="20" x2="2.01" y2="20"></line></svg>',
      'FiMonitor': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect><line x1="8" y1="21" x2="16" y2="21"></line><line x1="12" y1="17" x2="12" y2="21"></line></svg>',
      'FiSmartphone': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><rect x="5" y="2" width="14" height="20" rx="2" ry="2"></rect><line x1="12" y1="18" x2="12.01" y2="18"></line></svg>',
      'FiTablet': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><rect x="4" y="2" width="16" height="20" rx="2" ry="2"></rect><line x1="12" y1="18" x2="12.01" y2="18"></line></svg>',
      'FiServer': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><rect x="2" y="2" width="20" height="8" rx="2" ry="2"></rect><rect x="2" y="14" width="20" height="8" rx="2" ry="2"></rect><line x1="6" y1="6" x2="6.01" y2="6"></line><line x1="6" y1="18" x2="6.01" y2="18"></line></svg>',
      'FiDatabase': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><ellipse cx="12" cy="5" rx="9" ry="3"></ellipse><path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"></path><path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"></path></svg>',
      'FiHardDrive': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><line x1="22" y1="12" x2="2" y2="12"></line><path d="M5.45 5.11L2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z"></path><line x1="6" y1="16" x2="6.01" y2="16"></line><line x1="10" y1="16" x2="10.01" y2="16"></line></svg>',
      'FiCpu': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><rect x="4" y="4" width="16" height="16" rx="2" ry="2"></rect><rect x="9" y="9" width="6" height="6"></rect><line x1="9" y1="1" x2="9" y2="4"></line><line x1="15" y1="1" x2="15" y2="4"></line><line x1="9" y1="20" x2="9" y2="23"></line><line x1="15" y1="20" x2="15" y2="23"></line><line x1="20" y1="9" x2="23" y2="9"></line><line x1="20" y1="14" x2="23" y2="14"></line><line x1="1" y1="9" x2="4" y2="9"></line><line x1="1" y1="14" x2="4" y2="14"></line></svg>',
      'FiBattery': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><rect x="1" y="6" width="18" height="12" rx="2" ry="2"></rect><line x1="23" y1="13" x2="23" y2="11"></line></svg>',
      'FiBatteryCharging': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><path d="M5 18H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h3.19M15 6h2a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-3.19"></path><line x1="23" y1="13" x2="23" y2="11"></line><polyline points="11 6 7 12 13 12 9 18"></polyline></svg>',
      'FiPower': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><path d="M18.36 6.64a9 9 0 1 1-12.73 0"></path><line x1="12" y1="2" x2="12" y2="12"></line></svg>',
      'FiCompass': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><circle cx="12" cy="12" r="10"></circle><polygon points="16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76"></polygon></svg>',
      'FiNavigation': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><polygon points="3 11 22 2 13 21 11 13 3 11"></polygon></svg>',
      'FiNavigation2': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><polygon points="12 2 19 21 12 17 5 21 12 2"></polygon></svg>',
      'FiAnchor': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><circle cx="12" cy="5" r="3"></circle><line x1="12" y1="22" x2="12" y2="8"></line><path d="M5 12H2a10 10 0 0 0 20 0h-3"></path></svg>',
      'FiLifeBuoy': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><circle cx="12" cy="12" r="10"></circle><circle cx="12" cy="12" r="4"></circle><line x1="4.93" y1="4.93" x2="9.17" y2="9.17"></line><line x1="14.83" y1="14.83" x2="19.07" y2="19.07"></line><line x1="14.83" y1="9.17" x2="19.07" y2="4.93"></line><line x1="14.83" y1="9.17" x2="18.36" y2="5.64"></line><line x1="4.93" y1="19.07" x2="9.17" y2="14.83"></line></svg>',
      'FiShield': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path></svg>',
      'FiShieldOff': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><path d="M19.69 14a6.9 6.9 0 0 0 .31-2V5l-8-3-3.16 1.18"></path><path d="M4.73 4.73L4 5v7c0 6 8 10 8 10a20.29 20.29 0 0 0 5.62-4.38"></path><line x1="1" y1="1" x2="23" y2="23"></line></svg>',
      'FiKey': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><path d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"></path></svg>',
      'FiCommand': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><path d="M18 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3H6a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3V6a3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3h12a3 3 0 0 0 3-3 3 3 0 0 0-3-3z"></path></svg>',
      'FiHash': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><line x1="4" y1="9" x2="20" y2="9"></line><line x1="4" y1="15" x2="20" y2="15"></line><line x1="10" y1="3" x2="8" y2="21"></line><line x1="16" y1="3" x2="14" y2="21"></line></svg>',
      'FiAtSign': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><circle cx="12" cy="12" r="4"></circle><path d="M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-3.92 7.94"></path></svg>',
      'FiPercent': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><line x1="19" y1="5" x2="5" y2="19"></line><circle cx="6.5" cy="6.5" r="2.5"></circle><circle cx="17.5" cy="17.5" r="2.5"></circle></svg>',
      'FiThumbsUp': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><path d="M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"></path></svg>',
      'FiThumbsDown': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><path d="M10 15v4a3 3 0 0 0 3 3l4-9V2H5.72a2 2 0 0 0-2 1.7l-1.38 9a2 2 0 0 0 2 2.3zm7-13h2.67A2.31 2.31 0 0 1 22 4v7a2.31 2.31 0 0 1-2.33 2H17"></path></svg>',
      'FiMessageSquare': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg>',
      'FiCornerDownLeft': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><polyline points="9 10 4 15 9 20"></polyline><path d="M20 4v7a4 4 0 0 1-4 4H4"></path></svg>',
      'FiCornerDownRight': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><polyline points="15 10 20 15 15 20"></polyline><path d="M4 4v7a4 4 0 0 0 4 4h12"></path></svg>',
      'FiCornerUpLeft': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><polyline points="9 14 4 9 9 4"></polyline><path d="M20 20v-7a4 4 0 0 0-4-4H4"></path></svg>',
      'FiCornerUpRight': '<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><polyline points="15 14 20 9 15 4"></polyline><path d="M4 20v-7a4 4 0 0 1 4-4h12"></path></svg>',
    };

    // React 코드 전처리
    function preprocessReactCode(code) {
      let processed = code;
      let mainComponent = null;

      // export default ComponentName; 패턴에서 메인 컴포넌트 이름 추출
      const exportDefaultMatch = code.match(/export\s+default\s+(\w+)\s*;?\s*$/m);
      if (exportDefaultMatch) {
        mainComponent = exportDefaultMatch[1];
      }

      // import 문 제거
      processed = processed.replace(/import\s+.*from\s+["'][^"']+["'];?\n?/g, '');

      // export 문 정리
      processed = processed.replace(/export\s+default\s+\w+;?\s*$/gm, '');
      processed = processed.replace(/export\s+default\s+/g, 'const __MainComponent__ = ');
      processed = processed.replace(/export\s+const\s+(\w+)/g, 'const $1');
      processed = processed.replace(/export\s+function\s+(\w+)/g, 'function $1');

      // React Icons를 span으로 변환 (dangerouslySetInnerHTML 사용)
      Object.keys(REACT_ICONS_MAP).forEach(iconName => {
        const svgHtml = REACT_ICONS_MAP[iconName].replace(/"/g, "'");
        const regex = new RegExp(`<${iconName}([^/>]*)\\/?>`, 'g');
        processed = processed.replace(regex, (match, attrs) => {
          return `<span${attrs} dangerouslySetInnerHTML={{__html: "${svgHtml}"}} />`;
        });
      });

      // 메인 컴포넌트 이름이 없으면 첫 번째 컴포넌트 찾기
      if (!mainComponent) {
        const componentMatch = processed.match(/(?:const|function)\s+(\w+)\s*=?\s*\(?/);
        mainComponent = componentMatch ? componentMatch[1] : '__MainComponent__';
      }

      return { code: processed, mainComponent };
    }

    // 미리보기 업데이트
    function updatePreview() {
      if (!currentCode) {
        emptyPreview.classList.remove('hidden');
        previewFrame.classList.add('hidden');
        return;
      }

      emptyPreview.classList.add('hidden');
      previewFrame.classList.remove('hidden');

      const codeType = detectCodeType(currentCode);

      let html;

      if (codeType === 'react') {
        html = generateReactPreview(currentCode);
      } else {
        html = generateHtmlPreview(currentCode);
      }

      previewFrame.srcdoc = html;
    }

    // HTML 미리보기 생성
    function generateHtmlPreview(code) {
      const scriptOpen = '<' + 'script';
      const scriptClose = '</' + 'script>';

      // 완전한 HTML 문서인지 확인 (<!DOCTYPE> 또는 <html> 태그 포함 여부)
      const isFullDocument = code.includes('<!DOCTYPE') || code.includes('<html');

      if (isFullDocument) {
        // 완전한 HTML 문서의 경우 그대로 반환
        // Tailwind CDN이 없으면 추가
        let processedCode = code;
        if (!code.includes('tailwindcss') && !code.includes('cdn.tailwindcss')) {
          processedCode = code.replace(
            /<head>/i,
            `<head>\n  ${scriptOpen} src="https://cdn.tailwindcss.com">${scriptClose}`
          );
        }
        return processedCode;
      }

      // 부분 HTML (body 내용만 있는 경우)
      const jsCode = generateVanillaJs(code);

      // 코드에서 <style> 태그 추출
      const styleMatches = code.match(/<style[^>]*>[\s\S]*?<\/style>/gi) || [];
      const existingStyles = styleMatches.join('\n');

      // <style> 태그를 제거한 순수 HTML
      const htmlOnly = code.replace(/<style[^>]*>[\s\S]*?<\/style>/gi, '').trim();

      return `<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  ${scriptOpen} src="https://cdn.tailwindcss.com">${scriptClose}
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      min-height: 100vh;
      background: #ffffff;
      padding: 40px;
    }
  </style>
  ${existingStyles}
</head>
<body>${htmlOnly}
${jsCode ? `${scriptOpen}>
document.addEventListener('DOMContentLoaded', function() {
${jsCode}
});
${scriptClose}` : ''}
</body>
</html>`;
    }

    // React 미리보기 생성
    function generateReactPreview(code) {
      const { code: processedCode, mainComponent } = preprocessReactCode(code);

      const scriptOpen = '<' + 'script';
      const scriptClose = '</' + 'script>';

      return `<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  ${scriptOpen} src="https://cdn.tailwindcss.com">${scriptClose}
  ${scriptOpen} crossorigin src="https://unpkg.com/react@18/umd/react.development.js">${scriptClose}
  ${scriptOpen} crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js">${scriptClose}
  ${scriptOpen} src="https://unpkg.com/@babel/standalone@7.23.5/babel.min.js">${scriptClose}
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      min-height: 100vh;
      background: #ffffff;
    }
    .error-display {
      padding: 20px;
      background: #fef2f2;
      border: 1px solid #ef4444;
      border-radius: 8px;
      color: #dc2626;
      font-family: monospace;
      font-size: 13px;
      white-space: pre-wrap;
      margin: 20px;
      max-height: 80vh;
      overflow: auto;
    }
    .error-display h3 {
      margin-bottom: 10px;
      color: #b91c1c;
    }
  </style>
</head>
<body>
  <div id="root"></div>
  ${scriptOpen}>
    // 에러 핸들러 먼저 설정
    window.onerror = function(msg, url, line, col, error) {
      const stack = error ? error.stack : '';
      const rootEl = document.getElementById('root');
      if (rootEl) {
        rootEl.innerHTML = '<div class="error-display"><h3>Runtime Error</h3>' + msg + '\\n\\nLine: ' + line + ', Col: ' + col + '\\n\\n' + stack + '</div>';
      }
      return true;
    };
  ${scriptClose}
  ${scriptOpen} type="text/babel" data-presets="react">
    const { useState, useEffect, useRef, useCallback, useMemo, createContext, useContext, Fragment, forwardRef, Children, cloneElement } = React;

    // motion 컴포넌트 폴리필 (framer-motion 대체)
    const motion = {};
    const motionTags = ['div', 'span', 'button', 'a', 'ul', 'li', 'ol', 'p', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'img', 'section', 'article', 'nav', 'header', 'footer', 'main', 'aside', 'form', 'input', 'textarea', 'select', 'label', 'table', 'tr', 'td', 'th', 'tbody', 'thead', 'svg', 'path', 'circle', 'rect', 'line', 'g', 'polygon', 'polyline'];

    // motion 컴포넌트 생성 함수
    function createMotionComponent(tag) {
      const MotionComponent = function(props) {
        const { initial, animate, exit, transition, whileHover, whileTap, whileInView, whileFocus, whileDrag, variants, layout, layoutId, drag, dragConstraints, onDragStart, onDragEnd, onAnimationComplete, style, className, children, ...rest } = props;

        const [isHovered, setIsHovered] = React.useState(false);
        const [isTapped, setIsTapped] = React.useState(false);

        // transition 처리
        let transitionStyle = 'all 0.3s ease';
        if (transition) {
          const dur = transition.duration || 0.3;
          const type = transition.type === 'spring' ? 'cubic-bezier(0.68, -0.55, 0.265, 1.55)' : 'ease';
          transitionStyle = 'all ' + dur + 's ' + type;
        }

        // 기본 스타일 + animate 스타일
        let finalStyle = { ...style, transition: transitionStyle };

        // initial 적용 (컴포넌트가 처음 마운트될 때)
        if (initial && typeof initial === 'object') {
          Object.keys(initial).forEach(key => {
            if (key === 'opacity') finalStyle.opacity = initial[key];
            if (key === 'scale') finalStyle.transform = (finalStyle.transform || '') + ' scale(' + initial[key] + ')';
            if (key === 'x') finalStyle.transform = (finalStyle.transform || '') + ' translateX(' + initial[key] + 'px)';
            if (key === 'y') finalStyle.transform = (finalStyle.transform || '') + ' translateY(' + initial[key] + 'px)';
          });
        }

        // animate 적용
        if (animate && typeof animate === 'object') {
          Object.keys(animate).forEach(key => {
            if (key === 'scale' || key === 'rotate' || key === 'x' || key === 'y') {
              const transform = finalStyle.transform || '';
              if (key === 'scale') finalStyle.transform = transform + ' scale(' + animate[key] + ')';
              else if (key === 'rotate') finalStyle.transform = transform + ' rotate(' + animate[key] + 'deg)';
              else if (key === 'x') finalStyle.transform = transform + ' translateX(' + animate[key] + 'px)';
              else if (key === 'y') finalStyle.transform = transform + ' translateY(' + animate[key] + 'px)';
            } else {
              finalStyle[key] = animate[key];
            }
          });
        }

        // whileHover 적용
        if (isHovered && whileHover && typeof whileHover === 'object') {
          Object.keys(whileHover).forEach(key => {
            if (key === 'scale') {
              finalStyle.transform = (finalStyle.transform || '') + ' scale(' + whileHover[key] + ')';
            } else {
              finalStyle[key] = whileHover[key];
            }
          });
        }

        // whileTap 적용
        if (isTapped && whileTap && typeof whileTap === 'object') {
          Object.keys(whileTap).forEach(key => {
            if (key === 'scale') {
              finalStyle.transform = (finalStyle.transform || '') + ' scale(' + whileTap[key] + ')';
            } else {
              finalStyle[key] = whileTap[key];
            }
          });
        }

        const handleMouseEnter = (e) => {
          setIsHovered(true);
          if (rest.onMouseEnter) rest.onMouseEnter(e);
        };
        const handleMouseLeave = (e) => {
          setIsHovered(false);
          if (rest.onMouseLeave) rest.onMouseLeave(e);
        };
        const handleMouseDown = (e) => {
          setIsTapped(true);
          if (rest.onMouseDown) rest.onMouseDown(e);
        };
        const handleMouseUp = (e) => {
          setIsTapped(false);
          if (rest.onMouseUp) rest.onMouseUp(e);
        };

        return React.createElement(tag, {
          ...rest,
          style: finalStyle,
          className: className,
          onMouseEnter: handleMouseEnter,
          onMouseLeave: handleMouseLeave,
          onMouseDown: handleMouseDown,
          onMouseUp: handleMouseUp,
        }, children);
      };

      // displayName 설정
      MotionComponent.displayName = 'motion.' + tag;
      return MotionComponent;
    }

    // 각 태그에 대해 motion 컴포넌트 생성
    motionTags.forEach(tag => {
      motion[tag] = createMotionComponent(tag);
    });

    // AnimatePresence 폴리필
    const AnimatePresence = ({ children, mode, initial, onExitComplete }) => {
      return React.createElement(Fragment, null, children);
    };

    // framer-motion hooks 폴리필
    const useScroll = (options) => {
      const scrollY = { get: () => 0, set: () => {}, onChange: () => () => {} };
      const scrollYProgress = { get: () => 0, set: () => {}, onChange: () => () => {} };
      const scrollX = { get: () => 0, set: () => {}, onChange: () => () => {} };
      const scrollXProgress = { get: () => 0, set: () => {}, onChange: () => () => {} };
      return { scrollY, scrollYProgress, scrollX, scrollXProgress };
    };

    const useTransform = (value, inputRange, outputRange, options) => {
      const result = { get: () => outputRange ? outputRange[0] : 0, set: () => {}, onChange: () => () => {} };
      return result;
    };

    const useMotionValue = (initial) => ({
      get: () => initial,
      set: () => {},
      onChange: () => () => {},
      on: () => () => {},
    });

    const useSpring = (value, config) => value;
    const useVelocity = (value) => useMotionValue(0);
    const useAnimation = () => ({ start: async () => {}, stop: () => {}, set: () => {} });
    const useAnimationControls = useAnimation;
    const useInView = (ref, options) => true;
    const useReducedMotion = () => false;
    const useDragControls = () => ({ start: () => {} });
    const useMotionTemplate = (...args) => ({ get: () => args.join('') });
    const useCycle = (...items) => [items[0], () => {}];

    // stagger 함수
    const stagger = (duration, options) => duration;

    // animate 함수
    const animate = (element, keyframes, options) => ({ stop: () => {} });

    try {
      ${processedCode}

      const root = ReactDOM.createRoot(document.getElementById('root'));
      root.render(React.createElement(${mainComponent}));
    } catch (error) {
      console.error('React Preview Error:', error);
      document.getElementById('root').innerHTML = '<div class="error-display"><h3>Execution Error</h3>' + error.message + '\\n\\nStack:\\n' + (error.stack || 'No stack trace') + '</div>';
    }
  ${scriptClose}
</body>
</html>`;
    }

    // 분석 패널 탭 전환
    panelTabs.forEach(tab => {
      tab.addEventListener('click', () => {
        const tabName = tab.dataset.tab;
        panelTabs.forEach(t => t.classList.remove('active'));
        tab.classList.add('active');

        document.querySelectorAll('.panel-content').forEach(content => {
          content.classList.toggle('active', content.dataset.tab === tabName);
        });
      });
    });

    // 분석 패널 열기/닫기
    closePanel.addEventListener('click', () => {
      analysisPanel.classList.remove('open');
    });

    // 결과 보기 버튼
    viewResultBtn.addEventListener('click', () => {
      if (hasAnalyzed) {
        analysisPanel.classList.add('open');
      }
    });

    // 분석하기
    analyzeBtn.addEventListener('click', async () => {
      if (!currentCode) {
        openModal();
        return;
      }

      analyzeBtn.disabled = true;
      analyzeBtn.innerHTML = `<span>분석 중...</span>`;

      await new Promise(r => setTimeout(r, 500));

      try {
        const iframeDoc = previewFrame.contentDocument || previewFrame.contentWindow.document;
        const rootElement = iframeDoc.body.firstElementChild;

        if (!rootElement) throw new Error('요소 없음');

        // CSS 추출
        const cssData = extractStyles(rootElement, iframeDoc);
        const cssText = generateCssText(cssData);

        // JS 분석 및 생성
        const jsCode = generateVanillaJs(currentCode);

        // HTML 전체 코드 렌더링
        renderHtmlFullTab(cssText, jsCode);

        // React 코드 렌더링
        renderReactFullTab(cssText);

        // 분석 완료 표시
        hasAnalyzed = true;
        viewResultBtn.classList.remove('hidden');

        analysisPanel.classList.add('open');

      } catch (err) {
        console.error('분석 오류:', err);
      }

      analyzeBtn.disabled = false;
      analyzeBtn.innerHTML = `<span>분석하기</span>`;
    });

    // CSS 추출
    function extractStyles(element, doc) {
      const computed = doc.defaultView.getComputedStyle(element);
      const props = [
        'display', 'flex-direction', 'align-items', 'justify-content', 'gap',
        'width', 'height', 'padding', 'margin',
        'background-color', 'background', 'color',
        'border', 'border-radius', 'border-color',
        'font-family', 'font-size', 'font-weight', 'line-height', 'text-align',
        'box-shadow', 'opacity', 'cursor', 'transition', 'transform', 'animation'
      ];

      const styles = {};
      props.forEach(prop => {
        const value = computed.getPropertyValue(prop);
        if (value && value !== 'none' && value !== 'normal' && value !== 'auto' &&
          value !== '0px' && value !== 'rgba(0, 0, 0, 0)') {
          styles[prop] = value;
        }
      });

      const children = [];
      element.querySelectorAll('*').forEach((child, idx) => {
        const childComputed = doc.defaultView.getComputedStyle(child);
        const childStyles = {};
        props.forEach(prop => {
          const value = childComputed.getPropertyValue(prop);
          if (value && value !== 'none' && value !== 'normal' && value !== 'auto' &&
            value !== '0px' && value !== 'rgba(0, 0, 0, 0)') {
            childStyles[prop] = value;
          }
        });
        if (Object.keys(childStyles).length > 0) {
          children.push({ tag: child.tagName.toLowerCase(), index: idx, styles: childStyles });
        }
      });

      return { root: styles, children };
    }

    // CSS 텍스트 생성
    function generateCssText(data) {
      let cssText = `.component {\n`;
      for (const [prop, value] of Object.entries(data.root)) {
        cssText += `  ${prop}: ${value};\n`;
      }
      cssText += `}\n`;

      data.children.forEach((child, idx) => {
        cssText += `\n.component ${child.tag}:nth-child(${idx + 1}) {\n`;
        for (const [prop, value] of Object.entries(child.styles)) {
          cssText += `  ${prop}: ${value};\n`;
        }
        cssText += `}\n`;
      });

      return cssText;
    }

    // Vanilla JS 코드 생성
    function generateVanillaJs(code) {
      const jsBlocks = [];

      // 드롭다운/메뉴 패턴 감지 (다양한 패턴 지원)
      const hasDropdown = code.includes('dropdown') || code.includes('Dropdown') ||
                          code.includes('tab-btn') || code.includes('shift-tab') ||
                          code.includes('overlay-content') || code.includes('dropdown-overlay') ||
                          code.includes('content-section') ||
                          (code.includes('Products') && code.includes('Pricing'));

      if (hasDropdown) {
        jsBlocks.push(`// 드롭다운 메뉴 인터랙션
(function() {
  // 다양한 드롭다운 구조 지원
  const container = document.querySelector('.dropdown-container') ||
                   document.querySelector('[class*="dropdown"]') ||
                   document.querySelector('[class*="flex"][class*="gap"]');
  if (!container) return;

  // 탭 버튼 찾기 (다양한 선택자)
  const tabs = container.querySelectorAll('.tab-btn') ||
               container.querySelectorAll('button[id^="shift-tab"]') ||
               container.querySelectorAll('button:has(svg)');

  // 드롭다운 오버레이 찾기
  const overlay = document.querySelector('.dropdown-overlay') ||
                 document.getElementById('overlay-content') ||
                 document.getElementById('dropdownOverlay') ||
                 container.querySelector('[class*="absolute"][class*="rounded"]');

  // 화살표 찾기
  const arrow = document.querySelector('.dropdown-arrow') ||
               document.getElementById('dropdownArrow') ||
               (overlay ? overlay.querySelector('[class*="rotate-45"]') : null);

  if (!tabs || !tabs.length || !overlay) return;

  let activeTab = null;
  let isOverDropdown = false;
  let closeTimeout = null;

  // 콘텐츠 섹션들 찾기
  const contents = overlay.querySelectorAll('.content-section') ||
                  overlay.querySelectorAll('[data-content]') ||
                  overlay.querySelectorAll('[class*="overflow-hidden"] > div');

  tabs.forEach((tab, index) => {
    const tabName = tab.dataset?.tab || tab.getAttribute('data-tab') || index;

    tab.addEventListener('mouseenter', () => {
      clearTimeout(closeTimeout);
      openDropdown(tabName, tab, index);
    });

    tab.addEventListener('click', (e) => {
      e.preventDefault();
      if (activeTab === tabName) {
        closeDropdown();
      } else {
        openDropdown(tabName, tab, index);
      }
    });
  });

  overlay.addEventListener('mouseenter', () => {
    clearTimeout(closeTimeout);
    isOverDropdown = true;
  });

  overlay.addEventListener('mouseleave', () => {
    isOverDropdown = false;
    scheduleClose();
  });

  container.addEventListener('mouseleave', () => {
    scheduleClose();
  });

  function openDropdown(tabName, tabElement, index) {
    activeTab = tabName;

    // 모든 탭 비활성화
    tabs.forEach(t => {
      t.classList.remove('active', 'bg-neutral-800', 'text-neutral-100');
      const chevron = t.querySelector('svg');
      if (chevron) chevron.style.transform = '';
    });

    // 현재 탭 활성화
    tabElement.classList.add('active');
    const chevron = tabElement.querySelector('svg');
    if (chevron) chevron.style.transform = 'rotate(180deg)';

    // 모든 콘텐츠 숨기기
    contents.forEach(c => {
      c.classList.remove('active');
      c.style.display = 'none';
    });

    // 해당 콘텐츠 표시
    let targetContent = overlay.querySelector('[data-content="' + tabName + '"]');
    if (!targetContent && contents[index]) {
      targetContent = contents[index];
    }
    if (targetContent) {
      targetContent.classList.add('active');
      targetContent.style.display = 'block';
    }

    // 화살표 위치 조정
    if (arrow && tabElement) {
      const tabRect = tabElement.getBoundingClientRect();
      const containerRect = container.getBoundingClientRect();
      const arrowLeft = tabRect.left - containerRect.left + (tabRect.width / 2);
      arrow.style.left = arrowLeft + 'px';
    }

    // 오버레이 표시
    overlay.classList.add('open');
    overlay.style.opacity = '1';
    overlay.style.visibility = 'visible';
    overlay.style.transform = 'translateY(0)';
  }

  function closeDropdown() {
    activeTab = null;
    tabs.forEach(t => {
      t.classList.remove('active', 'bg-neutral-800', 'text-neutral-100');
      const chevron = t.querySelector('svg');
      if (chevron) chevron.style.transform = '';
    });
    overlay.classList.remove('open');
    overlay.style.opacity = '0';
    overlay.style.visibility = 'hidden';
    overlay.style.transform = 'translateY(-10px)';
  }

  function scheduleClose() {
    closeTimeout = setTimeout(() => {
      if (!isOverDropdown) closeDropdown();
    }, 150);
  }

  document.addEventListener('click', (e) => {
    if (!container.contains(e.target)) closeDropdown();
  });

  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') closeDropdown();
  });

  // 초기 상태: 드롭다운 숨기기
  overlay.style.opacity = '0';
  overlay.style.visibility = 'hidden';
  overlay.style.transform = 'translateY(-10px)';
  overlay.style.transition = 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)';
})();`);
      }

      // 스크롤 기반 패럴렉스 효과 감지
      const hasScale = code.match(/scale\(([^)]+)\)/);
      const hasTranslateY = code.match(/translateY\(([^)]+)\)/);
      const hasOpacity = code.match(/opacity:\s*([\d.]+)/);
      const hasSticky = code.includes('sticky');
      const hasParallaxSection = code.includes('h-[150vh]') || code.includes('150vh');

      if (hasParallaxSection || hasSticky) {
        jsBlocks.push(`// 패럴렉스 스크롤 효과
document.querySelectorAll('.parallax-section').forEach((section, index) => {
  const stickyBg = section.querySelector('.sticky-bg');
  const overlay = section.querySelector('.overlay');
  const content = section.querySelector('.content-overlay');

  window.addEventListener('scroll', () => {
    const rect = section.getBoundingClientRect();
    const sectionHeight = section.offsetHeight;
    const viewportHeight = window.innerHeight;

    // 섹션이 뷰포트에 있을 때
    if (rect.top < viewportHeight && rect.bottom > 0) {
      const progress = Math.max(0, Math.min(1, -rect.top / (sectionHeight - viewportHeight)));

      // 배경 스케일
      if (stickyBg) {
        const scale = 1 - (progress * 0.15);
        stickyBg.style.transform = \`scale(\${scale})\`;
      }

      // 오버레이 투명도
      if (overlay) {
        overlay.style.opacity = 1 - progress;
      }

      // 콘텐츠 Y 위치 및 투명도
      if (content) {
        const y = 250 - (progress * 500);
        const opacity = progress < 0.25 ? 0 : progress > 0.75 ? 0 : 1 - Math.abs(progress - 0.5) * 4;
        content.style.transform = \`translateY(\${y}px)\`;
        content.style.opacity = opacity;
      }
    }
  });
});`);
      }

      // 스크롤 텍스트 애니메이션
      const hasTranslateX = code.match(/translateX\(([^)]+)\)/);
      if (hasTranslateX && !hasParallaxSection) {
        jsBlocks.push(`// 스크롤 텍스트 애니메이션
const scrollText = document.querySelector('.scroll-text');
window.addEventListener('scroll', () => {
  const speed = 2;
  scrollText.style.transform = \`translateX(\${-window.scrollY * speed}px)\`;
});`);
      }

      // 호버 효과가 있는 버튼/요소
      const hasHoverTransition = code.includes('transition-colors') || code.includes('hover:');
      if (hasHoverTransition && !hasDropdown) {
        jsBlocks.push(`// 호버 효과 (CSS transition으로 처리됨)
// Tailwind의 hover: 클래스가 자동으로 처리합니다`);
      }

      return jsBlocks.join('\n\n');
    }

    // HTML에 component 클래스 추가
    function addComponentClass(html) {
      let modifiedHtml = html.trim();
      if (modifiedHtml.match(/^<\w+/)) {
        if (modifiedHtml.match(/^<\w+[^>]*class="/)) {
          modifiedHtml = modifiedHtml.replace(/^(<\w+[^>]*class=")/, '$1component ');
        } else if (modifiedHtml.match(/^<\w+[^>]*class='/)) {
          modifiedHtml = modifiedHtml.replace(/^(<\w+[^>]*class=')/, '$1component ');
        } else {
          modifiedHtml = modifiedHtml.replace(/^(<\w+)/, '$1 class="component"');
        }
      }
      return modifiedHtml;
    }

    // HTML 전체 코드 생성 (완전한 HTML 파일)
    function generateFullHtmlFile(jsCode) {
      const scriptOpen = '<' + 'script';
      const scriptClose = '</' + 'script>';

      let fullHtml = `<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Component</title>
  ${scriptOpen} src="https://cdn.tailwindcss.com">${scriptClose}
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
  </style>
</head>
<body>
${currentCode}
${jsCode ? `
${scriptOpen}>
${jsCode}
${scriptClose}` : ''}
</body>
</html>`;

      return fullHtml;
    }

    // HTML 전체 코드 탭 렌더링 (서브탭: HTML, CSS, JS, 전체)
    function renderHtmlFullTab(cssText, jsCode) {
      const fullHtmlCode = generateFullHtmlFile(jsCode);

      // 완전한 HTML 문서인 경우 style, script, body 분리 추출
      const isFullDocument = currentCode.includes('<!DOCTYPE') || currentCode.includes('<html');

      let htmlOnly = currentCode;
      let embeddedCss = '';
      let embeddedJs = '';

      if (isFullDocument) {
        // <style> 태그 추출
        const styleMatches = currentCode.match(/<style[^>]*>([\s\S]*?)<\/style>/gi) || [];
        embeddedCss = styleMatches.map(s => {
          const content = s.match(/<style[^>]*>([\s\S]*?)<\/style>/i);
          return content ? content[1].trim() : '';
        }).join('\n\n');

        // <script> 태그 추출 (src 속성이 없는 인라인 스크립트만)
        const scriptMatches = currentCode.match(/<script(?![^>]*src=)[^>]*>([\s\S]*?)<\/script>/gi) || [];
        embeddedJs = scriptMatches.map(s => {
          const content = s.match(/<script[^>]*>([\s\S]*?)<\/script>/i);
          return content ? content[1].trim() : '';
        }).join('\n\n');

        // <body> 태그 내용 추출
        const bodyMatch = currentCode.match(/<body[^>]*>([\s\S]*?)<\/body>/i);
        if (bodyMatch) {
          htmlOnly = bodyMatch[1].trim();
          // body 내의 script 태그 제거
          htmlOnly = htmlOnly.replace(/<script[^>]*>[\s\S]*?<\/script>/gi, '').trim();
        }
      }

      // CSS: 내장된 CSS가 있으면 사용, 없으면 분석된 CSS 사용
      const finalCss = embeddedCss || cssText;
      // JS: 내장된 JS가 있으면 사용, 없으면 생성된 JS 사용
      const finalJs = embeddedJs || jsCode;

      // 저장
      extractedHtmlFull = isFullDocument ? currentCode : fullHtmlCode;
      extractedHtmlOnly = htmlOnly;
      extractedCssOnly = finalCss;
      extractedJsOnly = finalJs;

      // HTML Only (body 내용만)
      document.getElementById('htmlOnlyContent').innerHTML = `
        <div class="section">
          <div class="section-title" style="display:flex;justify-content:space-between;align-items:center;">
            <span>HTML (Body)</span>
            <button class="copy-btn" onclick="copyCode('html-only')">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="9" y="9" width="13" height="13" rx="2"></rect>
                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
              </svg>
              복사
            </button>
          </div>
          <pre class="css-code"><code>${escapeHtml(htmlOnly)}</code></pre>
        </div>
      `;

      // CSS Only
      document.getElementById('cssOnlyContent').innerHTML = `
        <div class="section">
          <div class="section-title" style="display:flex;justify-content:space-between;align-items:center;">
            <span>CSS${embeddedCss ? '' : ' (추출됨)'}</span>
            <button class="copy-btn" onclick="copyCode('css-only')">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="9" y="9" width="13" height="13" rx="2"></rect>
                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
              </svg>
              복사
            </button>
          </div>
          <pre class="css-code"><code>${escapeHtml(finalCss || '/* Tailwind 클래스 사용 중 */')}</code></pre>
        </div>
      `;

      // JS Only
      document.getElementById('jsOnlyContent').innerHTML = `
        <div class="section">
          <div class="section-title" style="display:flex;justify-content:space-between;align-items:center;">
            <span>JavaScript${embeddedJs ? '' : ' (자동 생성)'}</span>
            <button class="copy-btn" onclick="copyCode('js-only')">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="9" y="9" width="13" height="13" rx="2"></rect>
                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
              </svg>
              복사
            </button>
          </div>
          <pre class="css-code"><code>${escapeHtml(finalJs || '// 정적 컴포넌트 (JavaScript 없음)')}</code></pre>
        </div>
      `;

      // Full HTML
      document.getElementById('fullHtmlContent').innerHTML = `
        <div class="section">
          <div class="section-title" style="display:flex;justify-content:space-between;align-items:center;">
            <span>전체 코드</span>
            <button class="copy-btn" onclick="copyCode('html-full')">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="9" y="9" width="13" height="13" rx="2"></rect>
                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
              </svg>
              복사
            </button>
          </div>
          <pre class="css-code"><code>${escapeHtml(extractedHtmlFull)}</code></pre>
        </div>
      `;

      // 서브탭 이벤트 리스너 설정
      setupSubTabs();
    }

    // 서브탭 이벤트 설정
    function setupSubTabs() {
      const subTabs = document.querySelectorAll('#htmlSubTabs .sub-tab');
      const subContents = document.querySelectorAll('#htmlFullContent .sub-content');

      subTabs.forEach(tab => {
        tab.addEventListener('click', () => {
          const targetSubtab = tab.dataset.subtab;

          // 탭 활성화
          subTabs.forEach(t => t.classList.remove('active'));
          tab.classList.add('active');

          // 콘텐츠 표시
          subContents.forEach(c => {
            c.classList.toggle('active', c.dataset.subcontent === targetSubtab);
          });
        });
      });
    }

    // React 코드 생성 및 렌더링 (통합 코드)
    function renderReactFullTab(cssText) {
      // HTML에서 컴포넌트 구조 분석
      const hasParallax = currentCode.includes('sticky') && currentCode.includes('h-[150vh]');

      let reactCode = '';

      if (hasParallax) {
        reactCode = generateParallaxReactCode();
      } else {
        reactCode = generateBasicReactCode();
      }

      // 통합 코드 저장
      extractedReactFull = reactCode;

      document.getElementById('reactFullContent').innerHTML = `
        <div class="section">
          <div class="section-title" style="display:flex;justify-content:space-between;align-items:center;">
            <span>REACT + FRAMER MOTION</span>
            <button class="copy-btn" onclick="copyCode('react-full')">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="9" y="9" width="13" height="13" rx="2"></rect>
                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
              </svg>
              복사
            </button>
          </div>
          <pre class="css-code"><code>${escapeHtml(reactCode)}</code></pre>
        </div>
      `;
    }

    // 패럴렉스 React 컴포넌트 생성 (통합 코드)
    function generateParallaxReactCode() {
      // 이미지 URL 추출
      const imgUrls = [];
      const imgMatches = currentCode.matchAll(/url\(["']?([^"')]+)["']?\)/gi);
      for (const match of imgMatches) {
        imgUrls.push(match[1]);
      }

      // 텍스트 추출
      const textContents = [];
      const sections = currentCode.split(/(?=<div[^>]*style="padding)/gi);

      sections.forEach(section => {
        const headingMatch = section.match(/<p[^>]*text-4xl[^>]*>([^<]+)</i);
        const subheadingMatch = section.match(/<p[^>]*text-xl[^>]*>([^<]+)</i);
        if (headingMatch || subheadingMatch) {
          textContents.push({
            heading: headingMatch ? headingMatch[1].trim() : '',
            subheading: subheadingMatch ? subheadingMatch[1].trim() : ''
          });
        }
      });

      // 통합 React 코드 반환
      return `import { useRef } from "react";
import { motion, useScroll, useTransform } from "framer-motion";

const IMG_PADDING = 12;

export const ParallaxComponent = () => {
  return (
    <div className="bg-white">
${imgUrls.map((url, i) => `      <TextParallaxContent
        imgUrl="${url}"
        subheading="${textContents[i]?.subheading || 'Subheading'}"
        heading="${textContents[i]?.heading || 'Heading'}"
      >
        <ExampleContent />
      </TextParallaxContent>`).join('\n')}
    </div>
  );
};

const TextParallaxContent = ({ imgUrl, subheading, heading, children }) => {
  return (
    <div style={{ paddingLeft: IMG_PADDING, paddingRight: IMG_PADDING }}>
      <div className="relative h-[150vh]">
        <StickyImage imgUrl={imgUrl} />
        <OverlayCopy heading={heading} subheading={subheading} />
      </div>
      {children}
    </div>
  );
};

const StickyImage = ({ imgUrl }) => {
  const targetRef = useRef(null);
  const { scrollYProgress } = useScroll({
    target: targetRef,
    offset: ["end end", "end start"],
  });

  const scale = useTransform(scrollYProgress, [0, 1], [1, 0.85]);
  const opacity = useTransform(scrollYProgress, [0, 1], [1, 0]);

  return (
    <motion.div
      style={{
        backgroundImage: \`url(\${imgUrl})\`,
        backgroundSize: "cover",
        backgroundPosition: "center",
        height: \`calc(100vh - \${IMG_PADDING * 2}px)\`,
        top: IMG_PADDING,
        scale,
      }}
      ref={targetRef}
      className="sticky z-0 overflow-hidden rounded-3xl"
    >
      <motion.div
        className="absolute inset-0 bg-neutral-950/70"
        style={{ opacity }}
      />
    </motion.div>
  );
};

const OverlayCopy = ({ subheading, heading }) => {
  const targetRef = useRef(null);
  const { scrollYProgress } = useScroll({
    target: targetRef,
    offset: ["start end", "end start"],
  });

  const y = useTransform(scrollYProgress, [0, 1], [250, -250]);
  const opacity = useTransform(scrollYProgress, [0.25, 0.5, 0.75], [0, 1, 0]);

  return (
    <motion.div
      style={{ y, opacity }}
      ref={targetRef}
      className="absolute left-0 top-0 flex h-screen w-full flex-col items-center justify-center text-white"
    >
      <p className="mb-2 text-center text-xl md:mb-4 md:text-3xl">{subheading}</p>
      <p className="text-center text-4xl font-bold md:text-7xl">{heading}</p>
    </motion.div>
  );
};

const ExampleContent = () => (
  <div className="mx-auto grid max-w-5xl grid-cols-1 gap-8 px-4 pb-24 pt-12 md:grid-cols-12">
    <h2 className="col-span-1 text-3xl font-bold md:col-span-4">
      Additional content explaining the above card here
    </h2>
    <div className="col-span-1 md:col-span-8">
      <p className="mb-4 text-xl text-neutral-600 md:text-2xl">
        Lorem ipsum dolor sit amet consectetur adipisicing elit.
      </p>
      <button className="w-full rounded bg-neutral-900 px-9 py-4 text-xl text-white transition-colors hover:bg-neutral-700 md:w-fit">
        Learn more →
      </button>
    </div>
  </div>
);

export default ParallaxComponent;`;
    }

    // 기본 React 컴포넌트 생성 (통합 코드)
    function generateBasicReactCode() {
      const jsxContent = currentCode.replace(/class=/g, 'className=').replace(/<!--[\s\S]*?-->/g, '');

      // 통합 React 코드 반환
      return `import { motion } from "framer-motion";

export const Component = () => {
  return (
    <motion.div
      initial={{ opacity: 0 }}
      animate={{ opacity: 1 }}
      className="component"
    >
${jsxContent}
    </motion.div>
  );
};

export default Component;`;
    }

    function isColor(value) {
      return /^(rgb|rgba|#|hsl)/i.test(value);
    }

    function escapeHtml(text) {
      return text.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');
    }

    // 통합 복사 함수
    function copyCode(type) {
      let text = '';

      // HTML 서브탭
      if (type === 'html-only') text = extractedHtmlOnly || '';
      else if (type === 'css-only') text = extractedCssOnly || '';
      else if (type === 'js-only') text = extractedJsOnly || '';
      else if (type === 'html-full') text = extractedHtmlFull || '';

      // React 탭 (통합 코드)
      else if (type === 'react-full') text = extractedReactFull || '';

      navigator.clipboard.writeText(text).then(() => {
        showCopyFeedback(event.target.closest('.copy-btn'));
      });
    }

    // 복사 피드백
    function showCopyFeedback(btn) {
      if (!btn) return;
      const originalHtml = btn.innerHTML;
      btn.innerHTML = `<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"></polyline></svg> 복사됨!`;
      btn.classList.add('copied');
      setTimeout(() => {
        btn.innerHTML = originalHtml;
        btn.classList.remove('copied');
      }, 2000);
    }

    // 키보드 단축키
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        closeModal();
        analysisPanel.classList.remove('open');
      }
      if ((e.metaKey || e.ctrlKey) && e.key === 'Enter') {
        if (modalOverlay.classList.contains('open')) {
          applyCode.click();
        }
      }
    });
  </script>
</body>

</html>